(window.webpackJsonp=window.webpackJsonp||[]).push([[45],{560:function(t,a,s){"use strict";s.r(a);var e=s(54),n=Object(e.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"react"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#react"}},[t._v("#")]),t._v(" React")]),t._v(" "),s("hr"),t._v(" "),s("ul",[s("li",[s("p",[t._v("组件化的理解以及如何去构建一个组件")])]),t._v(" "),s("li",[s("p",[s("code",[t._v("react diff")]),t._v(" 算法")]),t._v(" "),s("blockquote",[s("p",[t._v("计算出 "),s("code",[t._v("VDOM")]),t._v(" 中真正变化的部分，并只针对该部分对原生 "),s("code",[t._v("DOM")]),t._v(" 进行操作，而非重新渲染整个页面；")]),t._v(" "),s("p",[t._v("传统的 "),s("code",[t._v("DOM")]),t._v(" 算法，是通过循环递归对节点进行依次对比，时间复杂度达到 "),s("code",[t._v("O(n^3)")]),t._v("，这样会导致页面更新的十分慢，影响用户体验，因此对 "),s("code",[t._v("diff")]),t._v(" 算法进行以下三方面的改进：")]),t._v(" "),s("ul",[s("li",[s("p",[s("code",[t._v("tree diff")]),t._v("：")]),t._v(" "),s("p",[s("code",[t._v("Web UI")]),t._v(" 中 "),s("code",[t._v("DOM")]),t._v(" 节点"),s("strong",[t._v("跨层级移动操作较少，可忽略不计")]),t._v("；")])]),t._v(" "),s("li",[s("p",[s("code",[t._v("component diff")]),t._v("：")]),t._v(" "),s("p",[t._v("拥有相同类的两个组件，生成相似的树形结构；")]),t._v(" "),s("p",[t._v("拥有不同类的两个组件，生成不同的树形结构；")])]),t._v(" "),s("li",[s("p",[s("code",[t._v("element diff")]),t._v("：")]),t._v(" "),s("p",[t._v("对于"),s("strong",[t._v("同一层级")]),t._v("的一组子节点，通过为一的 "),s("code",[t._v("id")]),t._v(" 进行区分；")])])]),t._v(" "),s("p",[t._v("针对以上三方面，"),s("code",[t._v("diff")]),t._v(" 算法只会对同一层次的节点进行比较，若某节点不存在时，会对该节点及其子节点进行完全删除，不会进行进一步比较，且只需遍历一次就能完成整颗 "),s("code",[t._v("DOM")]),t._v(" 树的比较，若出现跨层级的操作，只能创建节点和删除节点的操作；")])])]),t._v(" "),s("li",[s("p",[t._v("虚拟DOM的优点")])]),t._v(" "),s("li",[s("p",[s("code",[t._v("React Hooks")]),t._v(" 的优缺点")]),t._v(" "),s("p",[t._v("优点：")]),t._v(" "),s("ol",[s("li",[t._v("更容易复用代码")]),t._v(" "),s("li",[t._v("清爽的代码且风格代码量少")])]),t._v(" "),s("p",[t._v("缺点：")]),t._v(" "),s("ol",[s("li",[t._v("响应式的"),s("code",[t._v("useEffect")])]),t._v(" "),s("li",[t._v("状态不同步")])])]),t._v(" "),s("li",[s("p",[t._v("React中的 "),s("code",[t._v("setState")]),t._v(" 什么时候是同步的,什么时候是异步的")]),t._v(" "),s("blockquote",[s("p",[t._v("在React中，"),s("strong",[t._v("如果是由React引发的事件处理（比如通过onClick引发的事件处理），调用setState不会同步更新this.state，除此之外的setState调用会同步执行this.state")]),t._v(" 。所谓“除此之外”，指的是绕过React通过addEventListener直接添加的事件处理函数，还有通过setTimeout/setInterval产生的异步调用。")]),t._v(" "),s("p",[s("strong",[t._v("原因：")]),t._v(" 在React的setState函数实现中，会根据一个变量isBatchingUpdates判断是直接更新this.state还是放到队列中回头再说，而isBatchingUpdates默认是false，也就表示setState会同步更新this.state，但是，"),s("strong",[t._v("有一个函数batchedUpdates，这个函数会把isBatchingUpdates修改为true，而当React在调用事件处理函数之前就会调用这个batchedUpdates，造成的后果，就是由React控制的事件处理过程setState不会同步更新this.state")]),t._v("。")]),t._v(" "),s("p",[s("strong",[t._v("注意：")]),t._v(" setState的“异步”并不是说内部由异步代码实现，其实本身执行的过程和代码都是同步的，只是合成事件和钩子函数的调用顺序在更新之前，导致在合成事件和钩子函数中没法立马拿到更新后的值，形式了所谓的“异步”，当然可以通过第二个参数 setState(partialState, callback) 中的callback拿到更新后的结果。")])])]),t._v(" "),s("li",[s("p",[t._v("React 中的单向数据流和双向数据绑定")]),t._v(" "),s("blockquote",[s("p",[t._v("react的单向数据流实际上就是指父组件通过 "),s("code",[t._v("props")]),t._v(" 传递 "),s("code",[t._v("state")]),t._v(" 给子组件，而子组件获取父组件状态之后，是只读的，并不能通过任何操作来改变该值在父组件中的值，除非在父组件中定义操作该 "),s("code",[t._v("state")]),t._v(" 的方法，并且通过 "),s("code",[t._v("prop")]),t._v(" 一同传递给子组件供子组件调用，这样降低了组件之间的耦合程度，避免在其他组件中修改自身组件的数据而造成的混乱；")])]),t._v(" "),s("blockquote",[s("p",[t._v("react的双向数据绑定：")]),t._v(" "),s("p",[t._v("双向数据绑定是指，视图会根据数据模型来进行一个动态显示，放在react中就是指 "),s("code",[t._v("state")]),t._v(" 数据会驱动页面的显示，最常用的，填写表单中获取的数据，就是一种双向数据绑定，vue中有 "),s("code",[t._v("v-modal")]),t._v(" 指令实现双向数据绑定，但是react中没有类似指令，所以就通过 onChange 事件监听元素的改变，再通过 "),s("code",[t._v("this.setState")]),t._v(" 实现更新状态中数据；")])])]),t._v(" "),s("li",[s("p",[t._v("组件间的几种通信方式")]),t._v(" "),s("p",[t._v("父传子："),s("code",[t._v("props")]),t._v("；")]),t._v(" "),s("p",[t._v("子传父：")]),t._v(" "),s("ul",[s("li",[s("p",[s("code",[t._v("props")]),t._v("：")]),t._v(" "),s("div",{staticClass:"language-jsx extra-class"},[s("pre",{pre:!0,attrs:{class:"language-jsx"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Child")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("React"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Component")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    data "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'我是子组件中的data'")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("render")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("props"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getChildData")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("data"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token plain-text"}},[t._v("我是Child组件")]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Parent")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("React"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Component")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    childData"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("getChildData")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("data")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("childData "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" data"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("data"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("render")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("Child getChildData "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("getChildData "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("此时 "),s("code",[t._v("Parent")]),t._v(" 组件中的 "),s("code",[t._v("childData")]),t._v(" 为 "),s("code",[t._v("我是子组件中的data")]),t._v("，其实这并不违反 react 的单项数据流，这也是将 父组件的属性作为 "),s("code",[t._v("props")]),t._v(" 传递下去，只是该属性是一个函数，子组件取到该方法后，将数据作为参数传入该方法中，而父组件通过形参接收子组件数据；")])]),t._v(" "),s("li",[s("p",[s("code",[t._v("refs")]),t._v("：")]),t._v(" "),s("blockquote",[s("p",[t._v("类似 html 标签中的 id，使用在一般 dom 中，可获取该 dom实例 的数据;")]),t._v(" "),s("p",[t._v("使用在子组件中，可获取子组件实例中的所有数据；")]),t._v(" "),s("p",[t._v("但是该方法需要谨慎使用；")])])])]),t._v(" "),s("p",[t._v("同级无嵌套关系：")]),t._v(" "),s("ul",[s("li",[t._v("通过第三方媒介方式\n"),s("ol",[s("li",[t._v("通过缓存：组件A把数据存到缓存中，组件B就可以从中取出;")]),t._v(" "),s("li",[t._v("通过url：通过location对象拿到…；")]),t._v(" "),s("li",[t._v("通过与后端配合：组件A把数据扔到接口里去，组件B可以从中拿到…；")]),t._v(" "),s("li",[t._v("redux，react-redux；")])])]),t._v(" "),s("li",[s("code",[t._v("context")])]),t._v(" "),s("li",[t._v("发布订阅机制")])])])])])}),[],!1,null,null,null);a.default=n.exports}}]);